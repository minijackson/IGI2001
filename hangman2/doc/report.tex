\documentclass{report}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{mathabx}
\usepackage{fullpage}
\usepackage{dirtree}
\usepackage[usenames,dvipsnames]{color}
\usepackage{listingsutf8}
\usepackage[hidelinks]{hyperref}

\definecolor{gray}{gray}{0.70}

\lstset{%
	tabsize=4,
	basicstyle=\small\ttfamily,
	numberstyle=\scriptsize\ttfamily,
	texcl=true,
	extendedchars=true,
	inputencoding=utf8/latin1
}

\lstdefinestyle{prog}{%
	caption=Programme,
	numbers=left,
	frame=L,
	language=c,
	tabsize=4,
	basicstyle=\small\ttfamily,
	numberstyle=\scriptsize\ttfamily,
	keywordstyle=\color{BlueViolet},
	stringstyle=\color{Green},
	commentstyle=\color{gray},
	showstringspaces=false
}

\lstdefinestyle{output}{%
	caption=Résultat,
	frame=single,
	belowcaptionskip=1\baselineskip,
	breaklines=true
}

\lstdefinestyle{outfile}{%
	caption=Fichier de sortie,
	frame=shadowbox,
	rulesepcolor=\color{gray},
	belowcaptionskip=1\baselineskip,
	breaklines=true
}

\author{Rémi \textsc{Nicole}}
\title{Making of Hangman2}
\date{}

\begin{document}

\maketitle

\chapter{Directory tree of the project}

\dirtree{%
 .1 [root].
   .2 configure.ac\DTcomment{Autoconf main configration file}.
   .2 Makefile.am.
   .2 src.
     .3 Makefile.am.
	 .3 hangman2\DTcomment{Executable}.
	 .3 hangman2.c\DTcomment{Main source file}.
	 .3 utils.
	   .4 dict.c.
	   .4 dict.h.
	   .4 words.c.
	   .4 words.h.
	   .4 pics.c.
	   .4 pics.h.
	   .4 inc.h\DTcomment{Common \lstinline[style=prog]|##include| and \lstinline[style=prog]|##define|}.
     .3 pics\DTcomment{Default pictures directory}.
	   .4 1.txt.
	   .4 2.txt.
	   .4 3.txt.
	   .4 4.txt.
	   .4 5.txt.
	   .4 6.txt.
	   .4 7.txt.
	   .4 8.txt.
	   .4 9.txt.
	   .4 10.txt.
   .2 doc\DTcomment{Documentation directory}.
     .3 Makefile.am.
	 .3 report.tex.
	 .3 report.pdf.
   .2 NEWS.
   .2 AUTHORS.
   .2 COPYING.
   .2 INSTALL.
   .2 LICENSE.
   .2 README.
   .2 THANKS.
   .2 ChangeLog.
}

\chapter{The Game}

\section{Main game}

\subsection{Picking a random word}

\paragraph{} In order to pick a random word in a file consisting of a single
word per line, the file is first scanned to count the number of files ($n$),
then a random number $k$ is picked in the $\ldbrack1;n\rdbrack$ interval.
After that, the $k^{th}$ word of the file is picked and returned.

\subsection{Game word and hidden word}

\paragraph{} Two sting variables are instantiated for the random word: one
which is the random word (game word) and another which is originally composed
of underscores (\texttt{\_}) only (hidden word). The second variable will be
the text displayed to the player and will serve to check if the player won: if
this string does not contains any underscores, then the player won. Each time
the player inputs a character, the inputted character is searched through the
game word and if found, any occurrences of this character will replace the
corresponding underscore(s) in the hidden word. If not found, the player will
lose one attempt.

\subsection{Tried letters}

\paragraph{} The string typed variable named \texttt{triedLetters} will
contains in order the letter already tried (with or without success) and each
time the user will input a character, the program will check that the letter
was not already tried, meaning that the letter is not contained in the
\texttt{triedLetters} variable. If it is contained, then the error message
\lstinline[style=prog]|"You already tried it!"| is displayed.

\subsection{Endgame}

\paragraph{} For the end game, two parameters are taken into account: the
hidden word variable and the remaining attempts variable. If the hidden word is
no more hidden, the player wins. Else if the remaining attempts is zero, then
the player looses.

\section{Details}

\subsection{Command line arguments}

\paragraph{} Command line arguments can be passed to the program. The
\texttt{--h} and \texttt{----help} options will make the program display an
help for the program command line usage and exit. The \texttt{--v} or
\texttt{----version} options will display the version number of the program and
exit. The \texttt{--d} or \texttt{----display} option takes one argument which
is the dictionary file containing the words to pick from. The header
\texttt{unistd.h} is used in order to be able to make use of the
\texttt{getopt} facility.

\subsection{Console clear}

\paragraph{} For each lines printed by the program each turn, the escape
sequence code \lstinline[style=prog]|"\033[A\033[2K"| is printed which will
	make the terminal cursor go one line up and any printed text after this
	escape sequence code will be printed over these lines.

\subsection{Invalid characters}

\paragraph{} Each time the player inputs a character, the character inputted is
checked through the function \lstinline[style=prog]|validLetter| and display
\lstinline[style=prog]|"Invalid character"| if the character inputted is not a
letter.  If the letter inputted is a \lstinline[style=prog]|'\n'|, the console
curser goes up one line more.

\subsection{\texttt{malloc} aversion}

\paragraph{} In order to prevent a \lstinline[style=prog]|malloc| from being
used in the function \lstinline[style=prog]|searchWord| of the
\texttt{utils/dict.c} file, a \lstinline[style=prog]|static| string is returned
and reset each time the function is called by putting the
\lstinline[style=prog]|'\0'| at the first character.

\end{document}
% vim: spell
